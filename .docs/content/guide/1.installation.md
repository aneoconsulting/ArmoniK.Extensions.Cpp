<!-- @case-police-ignore Api -->
<!-- @case-police-ignore Sdk -->

# Setup ArmoniK SDK

## Global prerequisites

- CMake minimum version 3.22
- gRPC minimum version 1.50 (installed or built from source)
- [ArmoniK API](https://github.com/aneoconsulting/ArmoniK.Api) latest version installed

## How to build for Linux

### Prerequisites Linux

1. Install Docker on your Linux system. Follow the instructions on the [official Docker documentation](https://docs.docker.com/engine/install/).
2. Clone the repository containing the source code and the necessary scripts.
3. In a Linux terminal:
    - Define the `ARMONIK_API_DIR` environment variable to point to the installation directory of ArmoniK API. If this variable is not defined, it is assumed
     that the ArmoniK.Api cpp installation directory is located at the same level where the current repository was cloned, that is: `../ArmoniK.Api/packages/cpp/install`.
    - Run the utility script:
    ```bash
      $ ./tools/setup-remote.sh
    ```

### CLion setup
- In a Linux terminal:
  ```bash
    ./tools/restart-build-env.sh
  ```
- In your IDE:
  - Setup ``Remote Host`` as your toolchain and specify the user as ``root``, password as ``password`` and the address and ports to match the REMOTE_BUILD_ADDRESS variable specified in the script.

### Visual Studio setup
  - In the remote explorer menu (left panel), you can search and connect to the `armonik_sdk_build_visual_studio` container:

  ![](https://armonik-public-images.s3.eu-west-3.amazonaws.com/armonik_sdks_doc/cpp/dev-container.png)

  - _Note: As the project source is mounted in the docker, you may want to disable the file copies for ``rsync``._

## How to build for Windows (Client only)

### Prerequisites Windows

- Visual Studio 2022 or CLion or any other IDE.
- Git

### Visual Studio

The Windows build is only for the client side, not the worker. When the prerequisites are satisfied, set up your IDE and configure it with CMake. You may check the installation directory of:
- ArmoniK API
- gRPC
- Protobuf
- CMake

If they are not installed in the same directory as specified in the CMakeLists.txt file at the project root, specify the install directory of ArmoniK API with ```ARMONIK_API_DIR``` and the others with ```CMAKE_PREFIX_PATH``` options.
